# Vercel Blob Storage Setup Guide

This guide will help you set up Vercel Blob storage for your SREF Library images.

## Prerequisites

1. **Node.js** - Install from [nodejs.org](https://nodejs.org/)
2. **Vercel Account** - Sign up at [vercel.com](https://vercel.com)
3. **Vercel CLI** - Install with `npm i -g vercel`

## Step 1: Create Vercel Blob Store

1. Go to your [Vercel Dashboard](https://vercel.com/dashboard)
2. Select your project
3. Go to the **Storage** tab
4. Click **Create Blob Store**
5. Give it a name (e.g., "sref-images")
6. Click **Create**

## Step 2: Set Up Environment Variables

After creating the blob store, Vercel will automatically add these environment variables:

- `BLOB_READ_WRITE_TOKEN` - Your blob store access token

To use them locally:

```bash
# Pull environment variables from Vercel
vercel env pull .env.local
```

## Step 3: Install Dependencies

```bash
# Install Vercel Blob SDK
npm install @vercel/blob
```

## Step 4: Upload Images to Blob Storage

Run the upload script:

```bash
# Upload all images from static/images/ to Vercel Blob
python upload_to_blob.py
```

This will:

- Upload all JPG files from `static/images/` to Vercel Blob
- Create a `blob_image_mapping.json` file with URL mappings
- Show progress and results

## Step 5: Deploy to Vercel

```bash
# Deploy your app
vercel --prod
```

## How It Works

### Local Development

- App uses local images from `static/images/`
- Images are served directly from the filesystem

### Production (Vercel)

- App uses blob URLs from `blob_image_mapping.json`
- Images are served from Vercel Blob storage
- Fast global CDN delivery

### Image URL Format

- **Local**: `static/images/101236067_01.jpg`
- **Blob**: `https://your-blob-store.blob.vercel-storage.com/images/101236067_01.jpg`

## File Structure After Setup

```
sref-library/
â”œâ”€â”€ app.py                          # Updated to use blob URLs
â”œâ”€â”€ blob_image_mapping.json         # Generated by upload script
â”œâ”€â”€ upload_to_blob.py              # Upload script
â”œâ”€â”€ package.json                   # Node.js dependencies
â”œâ”€â”€ .env.local                     # Environment variables (local)
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ images/                    # Excluded from deployment
â””â”€â”€ sref_analysis/                 # Search index (included)
```

## Troubleshooting

### "Node.js not found"

```bash
# Install Node.js from https://nodejs.org/
# Then verify installation
node --version
npm --version
```

### "@vercel/blob package not found"

```bash
npm install @vercel/blob
```

### "BLOB_READ_WRITE_TOKEN not found"

```bash
# Make sure you've created a blob store in Vercel dashboard
# Then pull environment variables
vercel env pull .env.local
```

### Upload fails

- Check your internet connection
- Verify the blob store exists in Vercel dashboard
- Ensure environment variables are set correctly

## Benefits

âœ… **Fast Global Delivery** - Images served from Vercel's CDN  
âœ… **Reduced Deployment Size** - Images not included in serverless function  
âœ… **Automatic Optimization** - Vercel handles image optimization  
âœ… **Cost Effective** - Pay only for storage and bandwidth used  
âœ… **Easy Management** - Upload once, serve everywhere

## Pricing

Vercel Blob pricing (as of 2024):

- **Free Tier**: 1GB storage, 100GB bandwidth
- **Pro Plan**: 5GB storage included, $0.023/GB additional
- **Bandwidth**: $0.15/GB after free tier

For 46MB of images, you'll stay well within the free tier limits.

## Next Steps

1. Run the upload script
2. Test locally to ensure images load
3. Deploy to Vercel
4. Verify images work in production

Your app will now have fast, globally distributed image delivery! ðŸš€

